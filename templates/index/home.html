{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="{% static 'olfu_logo_resized.jpg' %}">

    <title>OLFU CLINIC</title>
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/plugins/fontawesome/css/all.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/plugins/datatables/datatables.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/plugins/feather/feather.css' %}">
    <link rel="stylesheet" href="{% static 'assets/plugins/daterangepicker/daterangepicker.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/bootstrap-datetimepicker.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/style.css' %}">
    <link href="{% static 'login/css/toastr.min.css' %}" rel="stylesheet">
</head>

{% block style %}

{% endblock style %}

<body>
    <div class="main-wrapper">

        <div class="header">
            <div class="header-left">
                <a href="{% url 'dashboard:index' %}" class="logo">
                    <img src="{% static 'assets/img/logo-icon.jpg' %}" width="40" height="40" alt=""> <span>OLFU Clinic</span>
                </a>
            </div>
            <div class="left-right-menu">
                <a id="toggle_btn" class="left-chev" href="javascript:void(0);"><i class="fas fa-chevron-left"></i></a>
            </div>
            <a id="mobile_btn" class="mobile_btn float-left" href="#sidebar"><i class="fas fa-bars"></i></a>
            <div class="header-nav-blk">
                <h4>Dashboard</h4>
                <span>My Activity</span>
            </div>
            <ul class="nav user-menu user-menu-group float-end">
                 <li class="live-grp">
                    <h5>Live Monitoring <span class="live-dark"></span></h5>
                </li> 
                 {% comment %} <li class="top-liv-search">
                    <form>
                        <input type="text" class="form-control" placeholder="Search here">
                        <button class="btn" type="submit"><img src="{% static 'assets/img/icon/search-icon.svg' %}" alt=""></button>
                    </form>
                </li>      {% endcomment %}
                <li class="nav-item dropdown has-arrow user-profile-list">
                    <a href="#" class="dropdown-toggle nav-link user-link" data-bs-toggle="dropdown">
                        <span class="user-img"><img class="rounded-circle" src="{{ user_model.profileimg.url }}"
                                width="40" alt="picture">
                            <span class="status online"></span>
                        </span>
                        <div class="user-names">
                            <h5>{{ user_model.name }}</h5>
                            <span>{{ user_model.bio }}</span>
                        </div>
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="{% url 'account:profile' %}">My Profile</a>
                        <a class="dropdown-item" href="{% url 'account:edit_profile' %}">Edit Profile</a>
                    <a class="dropdown-item" href="{% url 'account:change_password' %}">Change Password</a>
                        <a class="dropdown-item" href="{% url 'account:logout' %}">Logout</a>
                    </div>
                </li>
            </ul>
            <div class="dropdown mobile-user-menu float-end">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i
                        class="fas fa-ellipsis-v"></i></a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="{% url 'account:profile' %}">My Profile</a>
                    <a class="dropdown-item" href="{% url 'account:edit_profile' %}">Edit Profile</a>
                        <a class="dropdown-item" href="{% url 'account:change_password' %}">Change Password</a>
                    <a class="dropdown-item" href="{% url 'account:logout' %}">Logout</a>
                </div>
            </div>
        </div>


        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li class="active">
                            <a class="active" href="{% url 'dashboard:index' %}"><img src="{% static 'assets/img/icon/menu-icon-01.svg' %}" alt="img">
                                <span>Dashboard</span></a>
                        </li>
                        <li>
                          <a href="{% url 'forecastingAndAnalytic:index' %}"><img src="{% static 'assets/img/icon/menu-icon-03.svg' %}" alt="img"> <span>Forecasting &
                                    Analytic</span></a>
                        </li>
                        {% comment %} <li>
                          <a href="#"><img src="{% static 'assets/img/icon/menu-icon-04.svg' %}" alt="img">
                              <span>Sticky Note</span></a>
                      </li> {% endcomment %}
                        {% comment %} <li class="submenu">
                            <a href="#"><img src="{% static 'assets/img/icon/menu-icon-13.svg' %}" alt="img"> <span> Transactions
                                </span> <span class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="{% url 'transaction:view_transaction' %}"><i class="feather-more-horizontal"></i><span> View
                                            Transactions</span></a></li>
                                <li><a href="{% url 'transaction:search_transaction' %}"><i class="feather-more-horizontal"></i><span>
                                            Transaction Search</span></a></li>
                                <li><a href="{% url 'transaction:single_transaction' %}"><i class="feather-more-horizontal"></i>
                                        <span>Single Transaction</span></a></li>
                            </ul>
                        </li> {% endcomment %}
                        
                        <li class="submenu">
                            <a href="#"><img src="{% static 'assets/img/icon/menu-icon-07.svg' %}" alt="img"> <span> Student Record </span>
                                <span class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="{% url 'studentrecord:add' %}">Add Student Record </a></li>
                                <li><a href="{% url 'studentrecord:list' %}">Record List</a></li> 
                              
                            </ul>
                        </li>
                        {% comment %} <li class="submenu">
                            <a href="#"><img src="{% static 'assets/img/icon/menu-icon-08.svg' %}" alt="img"> <span> Accounts </span>
                                <span class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="{% url 'accountSetting:invoices' %}">Invoices</a></li>
                                <li><a href="{% url 'accountSetting:payment' %}">Payments</a></li>
                                <li><a href="{% url 'accountSetting:expenses' %}">Expenses</a></li>
                                <li><a href="{% url 'accountSetting:taxes' %}">Taxes</a></li>
                                <li><a href="{% url 'accountSetting:provide_fund' %}">Provident Fund</a></li>
                            </ul>
                        </li> {% endcomment %}
                       
                        {% comment %} <li>
                            <a href="{% url 'activities:index' %}"><img src="{% static 'assets/img/icon/menu-icon-10.svg' %}" alt="img">
                                <span>Activities</span></a>
                        </li> {% endcomment %}
                        {% comment %} <li class="submenu">
                            <a href="#"><img src="{% static 'assets/img/icon/menu-icon-11.svg' %}" alt="img"> <span> Reports </span>
                                <span class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="{% url 'reports:expense_report' %}"> Expense Report </a></li>
                                <li><a href="{% url 'reports:invoice_report' %}"> Invoice Report </a></li>
                            </ul>
                        </li> {% endcomment %}
                        {% comment %} <li>
                            <a href="{% url 'account:settings' %}"><img src="{% static 'assets/img/icon/menu-icon-12.svg' %}" alt="img">
                                <span>Settings</span></a>
                        </li> {% endcomment %}
                        {% comment %} <li class="menu-title"> Data Forecasting</li>
                        
                        
                        
                  
                        <li class="submenu">
                            <a href="#"><i class="fas fa-table"></i> <span> Tables</span> <span
                                    class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="tables-basic.html">Basic Tables</a></li>
                                <li><a href="tables-datatables.html">Data Table</a></li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="#"><i class="fas fa-chart-area" aria-hidden="true"></i><span> Charts</span> <span
                                    class="menu-arrow"></span></a>
                            <ul style="display: none;">
                                <li><a href="morris.html">Morris chart</a></li>
                                <li><a href="chartjs.html">Am4charts</a></li>
                                <li><a href="chart-apex.html">Apex Charts</a></li>
                                <li><a href="chart-js.html">Chart Js</a></li>
                                <li><a href="chart-flot.html">Flot Charts</a></li>
                                <li><a href="chart-peity.html">Peity Charts</a></li>
                                <li><a href="chart-c3.html">C3 Charts</a></li>
                            </ul>
                        </li> {% endcomment %}
                        
                    </ul>
                    
                    {% comment %} <div class="need-btn">
                        <a href="javascript:;" class="btn btn-primary">Need help?</a>
                    </div> {% endcomment %}
                    <div class="logout-btn">
                        <a href="{% url 'account:logout' %}" class="btn btn-primary"><img src="{% static 'assets/img/icon/lock-out.svg' %}"
                                class="me-2" alt="">Logout</a>
                    </div>
                </div>
            </div>
        </div>


        <div class="page-wrapper bg-wrapper">
            {% block content %}
            
            {% endblock content %}
        </div>
    </div>

   



    </script>
    <script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>

    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>

    <script src="{% static 'assets/js/feather.min.js' %}"></script>

    <script src="{% static 'assets/plugins/apexchart/apexcharts.min.js' %}"></script>
    <script src="{% static 'assets/plugins/apexchart/chart-data.js' %}"></script>

    <script src="{% static 'assets/plugins/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'assets/plugins/datatables/datatables.min.js' %}"></script>
    <script src="{% static 'assets/js/select2.min.js' %}"></script>
    <script src="{% static 'assets/plugins/amchart/js/core.js' %}"></script>
    <script src="{% static 'assets/plugins/amchart/js/charts.js' %}"></script>
    <script src="{% static 'assets/plugins/amchart/js/animated.js' %}"></script>
    

    <script src="{% static 'assets/plugins/moment/moment.min.js' %}"></script>
    <script src="{% static 'assets/plugins/daterangepicker/daterangepicker.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-datetimepicker.min.js' %}"></script>

    <script src="{% static 'assets/js/jquery.slimscroll.js' %}"></script>

    <script src="{% static 'assets/js/app.js' %}"></script>
    <script src="{% static 'login/js/jquery.min.js' %}" ></script>
    <script src="{% static 'login/js/toastr.min.js' %}" ></script>
    {% for message in messages %}
        <h5>{{message}}</h5>
        {% if message.tags == 'error' %}
            <script>
                function showError() {
                    toastr.warning('{{ message }}','{{message.tags}}',{
                        "positionClass": "toast-top-full-width",
                        timeOut: 5000,
                        "closeButton": true,
                        "debug": false,
                        "newestOnTop": true,
                        "progressBar": true,
                        "preventDuplicates": true,
                        "onclick": null,
                        "showDuration": "300",
                        "hideDuration": "1000",
                        "extendedTimeOut": "1000",
                        "showEasing": "swing",
                        "hideEasing": "linear",
                        "showMethod": "fadeIn",
                        "hideMethod": "fadeOut",
                        "tapToDismiss": false
                    })
                }
                showError();
            </script>
     
        {% else %}
        <script>
            function showError() {
                toastr.success('{{ message }}','{{message.tags}}',{
                    "positionClass": "toast-top-full-width",
                    timeOut: 5000,
                    "closeButton": true,
                    "debug": false,
                    "newestOnTop": true,
                    "progressBar": true,
                    "preventDuplicates": true,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut",
                    "tapToDismiss": false
                })
            }
            showError();
        </script>
        {% endif%}

    {% endfor%}
    <script>
        
        function uploadFile() {
            var messageBox = document.createElement("div");
            messageBox.innerText = "Uploading file. Please wait...";
            messageBox.style.position = "fixed";
            messageBox.style.top = "50%";
            messageBox.style.left = "50%";
            messageBox.style.transform = "translate(-50%, -50%)";
            messageBox.style.background = "#fff";
            messageBox.style.padding = "20px";
            messageBox.style.border = "1px solid #ccc";
            messageBox.style.borderRadius = "5px";
            messageBox.style.zIndex = "9999";
            document.body.appendChild(messageBox);
            var fileInput = document.getElementById("file_input");
            var form = fileInput.parentElement;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", form.action, true);
            xhr.setRequestHeader("X-CSRFToken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    messageBox.innerText = "File uploaded successfully!";
                    setTimeout(function() {
                        messageBox.remove();
                    }, 2000);
                } else {
                    messageBox.innerText = "File upload failed.";
                    setTimeout(function() {
                        messageBox.remove();
                    }, 2000);
                }
            };
            xhr.send(new FormData(form));
        }
        </script>

        <script>
           function updateForecast() {
                fetch("{% url 'dashboard:update_forecast' %}")
                    .catch(error => {
                        console.error(error);
                    });
            }

            setInterval(updateForecast, 10000);
        </script>
    {% block script %}
    
    
    {% endblock script %}
</body>
{{ redirect_to_login_immediately }}
</html>
